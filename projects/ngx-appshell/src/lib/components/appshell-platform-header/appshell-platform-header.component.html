<nav class="appshell-meta-navigation" aria-label="Top of the header navigation">
    @if(isPlatformPickerOpened() !== null) {
        <div class="platform-picker-trigger" [class.opened-widget]="isPlatformPickerOpened()" (click)="openPlatformPicker()" (keypress)="openPlatformPicker()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="5.53846" height="5.53846" fill="#F4F4F4"/><rect y="9.23077" width="5.53846" height="5.53846" fill="#F4F4F4"/><rect y="18.4615" width="5.53846" height="5.53846" fill="#F4F4F4"/><rect x="9.23071" width="5.53846" height="5.53846" fill="#F4F4F4"/><rect x="9.23071" y="9.23077" width="5.53846" height="5.53846" fill="#F4F4F4"/><rect x="9.23071" y="18.4615" width="5.53846" height="5.53846" fill="#F4F4F4"/><rect x="18.4615" width="5.53846" height="5.53846" fill="#F4F4F4"/><rect x="18.4615" y="9.23077" width="5.53846" height="5.53846" fill="#F4F4F4"/><rect x="18.4615" y="18.4615" width="5.53846" height="5.53846" fill="#F4F4F4"/></svg>
        </div>
    }

    <div class="app-id-ctn">
        @if (symbol()) {
            <img src="assets/logo/{{ symbol() }}" alt="App symbol in the header" class="header-symbol" />
        }
        @if (logo()) {
            <img src="assets/logo/{{ logo() }}" alt="App logo in the header" class="header-logo" />
        }
        <h1>{{ applicationName() }}</h1>
    </div>


    @if (projectPicker() && projectPicker()?.label) {
        <appshell-header-picker
            [picker]="projectPicker()!"
            [searchable]="true"
            (pick)="userProjectPick.emit($event)" />
    }
    @if (secondaryPicker() && secondaryPicker()?.label && secondaryPicker()?.options && secondaryPicker()?.options!.length > 0) {
        <appshell-header-picker
            [picker]="secondaryPicker()!"
            (pick)="userSecondaryPick.emit($event)" />
    }
    <div class="header-space"></div>
    @for (link of links(); track link.label; let index = $index) {
        <a class="header-link" [appShellLink]="link.anchor" [class.active]="getCurrentUrlPath() === link.anchor" target="{{link!.target || '_self'}}" [class.last]="index+1 === links().length">
            {{link.label}}
        </a>
    }
    @if (helpLink() && helpLink()?.icon) {
        <appshell-header-icon-link [link]="helpLink()!" />
    }
    @if (notificationsLink() && notificationsLink()?.icon) {
        <appshell-header-icon-link [link]="notificationsLink()!" [badge]="notificationsCount()" />
    }
    <ng-content select="extra-icons"></ng-content>
    <div class="separator"></div>

    <appshell-header-user
        [loggedUser]="loggedUser()"
        (loggedIn)="userLoggedIn.emit()"
        (loggedOut)="userLoggedOut.emit()" />
</nav>